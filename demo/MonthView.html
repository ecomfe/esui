<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>MonthView - ESUI Demo</title>
        <script src="loader/esl.js"></script>
        <script src="loader/config.js"></script>
        <link rel="stylesheet" href="demo.css" />
    </head>
    <body>
        <header>MonthView</header>
        <div class="container">
            <h2>单选模式日历</h2>
            <p class="desc-title">
            属性设置
            </p>
            <table class="desc-table" border="0" cellspacing="0" cellpadding="0">
                <tbody>
                    <tr style="background:">
                        <th width="50">属性名</th>
                        <th width="150">描述</th>
                        <th width="450" colspan=2>格式</th>
                        <th width="150">默认值</th>
                    </tr>
                    <tr>
                        <td>range</td>
                        <td>日历可选区间</td>
                        <td>字符串。逗号分隔开始结束，如：<br>2013-07-03,2013-08-29</td>
                        <td>对象。如：<br>{beign: new Date(2013, 7, 3), end:new Date(2016, 7, 3)}</td>
                        <td>开始：1982-11-04 <br> 结束：2046-11-04</td></tr>
                    <tr><td>value</td><td>日历高亮选择日期</td><td colspan=2>YYYY-MM-DD，如：2013-07-01</td><td>当天</td></tr>
                    <tr><td>rawValue</td><td>日历高亮选择日期</td><td colspan=2>Date</td><td>当天</td></tr>
                    <tr><td>year</td><td>日历显示年</td><td colspan=2>number，如：2013</td><td>value所在年</td></tr>
                    <tr><td>month</td><td>日历显示月</td><td colspan=2>从1开始的number，如：11</td><td>value所在月</td></tr>
                </tbody>
            </table>
            <p class="desc-title">
            自动纠错
            </p>
            <ul>
                <li>value超出range：无高亮日期显示，但并不会自动纠正value</li>
                <li>year或month超出range，自动纠错为最近的正确值</li>
                <li>range的开始值大于结束值，自动调整顺序</li>
            </ul>
            <p class="desc-title">
            实例展示
            </p>
            <div class="demo-container">
                <div data-ui="type:MonthView;id:test1;"
                 data-ui-year="2013" data-ui-month="3"
                 data-ui-range="2013-09-03,2013-08-29"
                 data-ui-value="2013-07-01">
                </div>
                <div class="control-panel">
                    <br>
                    <button id="test1-btn0">改变value</button>
                    <input type="textbox" id="test1-ipt0"></input>
                    <br>
                    <button id="test1-btn1">改变月</button>
                    <input type="textbox" id="test1-ipt1"></input>
                    <br>
                    <button id="test1-btn2">改变年</button>
                    <input type="textbox" id="test1-ipt2"></input>
                    <br>
                    <button id="test1-btn3">改变range</button>
                    <input type="textbox" id="test1-ipt3"></input>
                    <p>预期结果：
                        <span id="test1-result">
                        </span>
                    </p>
                </div>
            </div>
            
            <h2>多选模式日历</h2>
            <p class="desc-title">
            属性设置
            </p>
            <table class="desc-table" border="0" cellspacing="0" cellpadding="0">
                <tbody>
                    <tr style="background:">
                        <th width="50">属性名</th>
                        <th width="150">描述</th>
                        <th width="450" colspan=2>格式</th>
                        <th width="150">默认值</th>
                    </tr>
                    <tr>
                        <td>range</td>
                        <td>日历可选区间</td>
                        <td>字符串。逗号分隔开始结束，如：<br>2013-07-03,2013-08-29</td>
                        <td>对象。如：<br>{beign: new Date(2013, 7, 3), end:new Date(2016, 7, 3)}</td>
                        <td>开始：1982-11-04 <br> 结束：2046-11-04</td></tr>
                    <tr><td>value</td><td>日历高亮选择日期</td><td colspan=2>逗号分隔多个日期，两个一组，分别代表一个小区段的开始和结束，如：2013-07-01,2013-07-01,2013-07-03,2013-07-28</td><td>''</td></tr>
                    <tr><td>rawValue</td><td>日历高亮选择日期</td><td colspan=2>数组，选择的所有日期对象的集合</td><td>[]</td></tr>
                    <tr><td>year</td><td>日历显示年</td><td colspan=2>number，如：2013</td><td>当前日期所在年</td></tr>
                    <tr><td>month</td><td>日历显示月</td><td colspan=2>从1开始的number，如：11</td><td>当前日期所在月</td></tr>
                </tbody>
            </table>
            <p class="desc-title">
            自动纠错
            </p>
            <ul>
                <li>value超出range：只高亮选择在Range范围内日期，自动纠正value</li>
                <li>year或month超出range，自动纠错为最近的正确值</li>
                <li>range的开始值大于结束值，自动调整顺序</li>
                <li>value中出现重叠区，自动去重，但不修正value</li>
            </ul>
            <p class="desc-title">
            实例展示
            </p>
            <div class="demo-container">
                <div data-ui="type:MonthView;id:test2;mode:multi;"
                 data-ui-range="2013-03-03,2013-04-29"
                 data-ui-value="2013-03-01,2013-03-01,2013-03-03,2013-03-28,2013-03-29,2013-03-29,2013-04-01,2013-04-27">
                </div>
                <div class="control-panel">
                    <br>
                    <button id="test2-btn0">改变value</button>
                    <input type="textbox" id="test2-ipt0"></input>
                    <br>
                    <button id="test2-btn1">改变月</button>
                    <input type="textbox" id="test2-ipt1"></input>
                    <br>
                    <button id="test2-btn2">改变年</button>
                    <input type="textbox" id="test2-ipt2"></input>
                    <br>
                    <button id="test2-btn3">改变range</button>
                    <input type="textbox" id="test2-ipt3"></input>
                    <p>预期结果：
                        <span id="test2-result">
                        </span>
                    </p>
                </div>
            </div>

            <div class="demo-container">
                <esui-month-view data-ui="id:test3;mode:multi;"
                 data-ui-range="2013-03-03,2013-04-29"
                 data-ui-value="2013-03-01,2013-03-01,2013-03-03,2013-03-28,2013-03-29,2013-03-29,2013-04-01,2013-04-27">
                </esui-month-view>
            </div>
        </div>
        <script>
        require(
            [
                'esui',
                'esui/TipLayer',
                'esui/MonthView',
                'css!esui/css/main.css'
            ],
            function (ui, TipLayer) {
                var monthViews = ui.init();
                var singleMonthView = monthViews[0];
                var multiMonthView = monthViews[1];


                var test1Btn0 = document.getElementById('test1-btn0');
                var test1Ipt0 = document.getElementById('test1-ipt0');
                test1Btn0.onclick = function() {
                    var value = test1Ipt0.value;
                    singleMonthView.setProperties({
                        value: value
                    });
                }


                var test1Btn1 = document.getElementById('test1-btn1');
                var test1Ipt1 = document.getElementById('test1-ipt1');
                test1Btn1.onclick = function() {
                    var month = test1Ipt1.value;
                    singleMonthView.setProperties({
                        month: month
                    });
                }


                var test1Btn2 = document.getElementById('test1-btn2');
                var test1Ipt2 = document.getElementById('test1-ipt2');
                test1Btn2.onclick = function() {
                    var year = test1Ipt2.value;
                    multiMonthView.setProperties({
                        year: year
                    });
                }

                var test1Btn3 = document.getElementById('test1-btn3');
                var test1Ipt3 = document.getElementById('test1-ipt3');
                test1Btn3.onclick = function() {
                    var range = test1Ipt3.value;
                    multiMonthView.setProperties({
                        range: range
                    });
                }




                var test2Btn0 = document.getElementById('test2-btn0');
                var test2Ipt0 = document.getElementById('test2-ipt0');
                test2Btn0.onclick = function() {
                    var value = test2Ipt0.value;
                    multiMonthView.setProperties({
                        value: value
                    });
                }


                var test2Btn1 = document.getElementById('test2-btn1');
                var test2Ipt1 = document.getElementById('test2-ipt1');
                test2Btn1.onclick = function() {
                    var month = test2Ipt1.value;
                    multiMonthView.setProperties({
                        month: month
                    });
                }


                var test2Btn2 = document.getElementById('test2-btn2');
                var test2Ipt2 = document.getElementById('test2-ipt2');
                test2Btn2.onclick = function() {
                    var year = test2Ipt2.value;
                    multiMonthView.setProperties({
                        year: year
                    });
                }

                var test2Btn3 = document.getElementById('test2-btn3');
                var test2Ipt3 = document.getElementById('test2-ipt3');
                test2Btn3.onclick = function() {
                    var range = test2Ipt3.value;
                    multiMonthView.setProperties({
                        range: range
                    });
                }


                var result1Container = document.getElementById('test1-result');
                var result2Container = document.getElementById('test2-result');
                singleMonthView.on('change', function(){
                    result1Container.innerHTML = this.getValue();
                })
                multiMonthView.on('change', function(){
                    result2Container.innerHTML = this.getValue();
                })

            }
        )
        </script>
    </body>
</html>
